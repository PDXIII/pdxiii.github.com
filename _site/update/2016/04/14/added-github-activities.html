<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Added My GitHub Activities</title>

  <meta name="description" content="Yes! Finally I have it done. As you might have recognized on the front page you can see My Latest GitHub Activities! For this task I used good ol’ jQuery, un...">

  <link rel="stylesheet" href="/css/style.css">

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76482516-1', 'auto');
  ga('send', 'pageview');

</script>

  <link rel="canonical" href="https://pdxiii.github.io/update/2016/04/14/added-github-activities.html">
  <link rel="alternate" type="application/rss+xml" title="PDXIII on GitHub" href="https://pdxiii.github.io/feed.xml">
</head>


  <body class="">

    <header class="site-header">
  
  
  <div class="hero">
    
    <div class="home-link">
      <a href="/" ">Home</a>
    </div>    
    
    <div class="hero-inner">
      
      
      <div class="hero-copy">
        <h1 class="site-title">
          Added My GitHub Activities
        </h1>	
      </div>
    </div>
  </div>
  
  
</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Added My GitHub Activities</h1>
    <p class="post-meta"><time datetime="2016-04-14T15:20:10+02:00" itemprop="datePublished">Apr 14, 2016</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Yes! Finally I have it done. As you might have recognized on the front page you can see <strong>My Latest GitHub Activities!</strong> For this task I used <a href="https://jquery.com">good ol’ jQuery</a>, <a href="http://underscorejs.org">underscore.js</a> and <a href="http://momentjs.com">moment.js</a>.</p>

<h2 id="but-why">But why?</h2>

<p>Because I can! No, just kidding. I always thought about my personal GitHub page as informative as it can be. And not a page just like “Hello World! I am Pete an Interface Designer from Berlin and this is my blog”. No, my page should consist of content, that I provide and some dynamically generated content, provided by the <a href="https://developer.github.com/v3/">GitHub API</a>.</p>

<h2 id="in-depth">In Depth</h2>

<ol>
  <li>Get the data</li>
  <li>Handle the data</li>
  <li>Nicer timestamps with [moment.js][moment.js]</li>
  <li>Templating with <a href="http://underscorejs.org">underscore.js</a></li>
  <li>Displaying data in HTML</li>
</ol>

<h3 id="get-the-data">Get the Data</h3>

<p>In my code, the function which handles the task to display my GitHub activities caries the soundfull name  <code class="highlighter-rouge">displayActivities</code>. It receives two arguments. First is the user name, the other is a DOM element selected with <a href="https://jquery.com">jQuery</a>, that will later contain the activities as HTML code.</p>

<p>First of all, a AJAX call is made against GitHub’s User Event Stream <code class="highlighter-rouge">https://api.github.com/users/[GITHUB_USER_NAME]/events/public</code>.</p>

<p>If the AJAX call is successful, the received data is limited to the latest five events. Each event is passed to the function <code class="highlighter-rouge">parseActivityJSON</code>.</p>

<p>See the whole function here:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function displayActivities (_username, _$container) {

  var requestURL = 'https://api.github.com/users/' 
+ _username + '/events/public',
  activities = [];

  $.getJSON(requestURL, function (json) {
  
    if(json.message == "Not Found" || json.name == '') {
    
      _$container.append('&lt;h2&gt;No Info Found&lt;/h2&gt;');
    }
    else {
    
      $.each( json, function (index){
      
        if (index &lt;= 5) {
        
          var output = selectTemplate(parseActivityJSON(json[index]));
          activities.push(output);
        }
      });
    
      _$container.append(activities.join(''));
    }
  });
}
</code></pre>
</div>

<h3 id="handle-the-data">Handle the Data</h3>

<p>The purpose of the function <code class="highlighter-rouge">parseActivityJSON</code> is to uniform the event data and make it easier to handle. For example there is some some string split and concat going on, to build URLs to the repository or the repository owner.</p>

<p>At least the function returns an object, which can be imagined like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var activityObj = {
  type = string,
  formatedTime = string,
  repoOwner = string,
  repoOwnerURL = string,
  repoName = string,
  repoURL = string,
  // if this event is of the type 'IssuesEvent'
  issueURL = string,
  issueNumber = integer
}
</code></pre>
</div>

<p>Before we follow this objects return to the <code class="highlighter-rouge">displayActivities</code> function, we take a look what happen to the timestamp.</p>

<h3 id="nicer-timestamps-with-momentjsmomentjs">Nicer timestamps with [Moment.js][moment.js]</h3>

<p>Of course I could have just used the given format of the event’s timestamp, but I trying to create messages that can be read most human as possible. The right library for this job is <a href="http://momentjs.com">moment.js</a>, especially with its <code class="highlighter-rouge">calendar()</code> function.</p>

<p>The desired format can be defined in a kind of dictionary:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>momentFormatSettings = {
   sameDay: '[Today]',
   nextDay: '[Tomorrow]',
  nextWeek: 'dddd',
   lastDay: '[Yesterday]',
  lastWeek: '[Last] dddd',
  sameElse: '[On] MMM D, YYYY'
};
</code></pre>
</div>

<p>And later the given timestamp will be parsed with the <code class="highlighter-rouge">calendar</code> function:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>var formatedTime = moment(givenTimestamp).calendar(null,momentFormatSettings );
</code></pre>
</div>

<p>We can now return to the <code class="highlighter-rouge">displayActivities</code> function with our nicely formated <strong>activityObj</strong>.</p>

<h3 id="templating-with-underscorejsunderscorejs">Templating with <a href="http://underscorejs.org">Underscore.js</a></h3>

<p>And from <code class="highlighter-rouge">displayActivities</code> our <strong>activityObj</strong> is directly passed into the <code class="highlighter-rouge">selectTemplate</code> function.</p>

<p>One big advantage of [underscore.js][underscore] is, that you can store your template in your HTML code and just select it with <a href="https://jquery.com">jQuery</a>. The provided templates look nice in your HTML and don’t pollute your javascript code. The variables need to be enclosed like this <code class="highlighter-rouge">&lt;%= VARIABLE %&gt;</code></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;script id="watchEvent" type="text/html"&gt;
&lt;li&gt;
  &lt;p&gt;
    &lt;%= formatedTime %&gt; I starred &lt;a class="repoName" href="&lt;%= repoURL %&gt;"&gt;&lt;%= repoName %&gt;&lt;/a&gt; by &lt;a class="repoOwner" href="&lt;%= repoOwnerURL %&gt;"&gt;&lt;%= repoOwner %&gt;&lt;/a&gt;. I think it is pretty cool!
  &lt;/p&gt;
&lt;/li&gt;
&lt;/script&gt;

&lt;script id="issueEvent" type="text/html"&gt;
&lt;li&gt;
  &lt;p&gt;
      &lt;%= formatedTime %&gt; I filed &lt;a href="&lt;%= issueURL %&gt;"&gt;issue &amp;#8470;&lt;%= issueNumber %&gt;&lt;/a&gt; at the &lt;a class="repoName" href="&lt;%= repoURL %&gt;"&gt;&lt;%= repoName %&gt;&lt;/a&gt; project by &lt;a class="repoOwner" href="&lt;%= repoOwnerURL %&gt;"&gt;&lt;%= repoOwner %&gt;&lt;/a&gt;. Take a look, maybe you’ve got the answer.
  &lt;/p&gt;
&lt;/li&gt;
&lt;/script&gt;

&lt;script id="pushEvent" type="text/html"&gt;
  &lt;li&gt;
    &lt;p&gt;
        &lt;%= formatedTime %&gt; I pushed some code to my  &lt;a class="repoName" href="&lt;%= repoURL %&gt;"&gt;&lt;%= repoName %&gt;&lt;/a&gt; project.
    &lt;/p&gt;
  &lt;/li&gt;
&lt;/script&gt;


&lt;script id="default" type="text/html"&gt;
  &lt;li&gt;
    &lt;p&gt;
      &lt;%= formatedTime %&gt; I have done something top secret on GitHub. If I would tell you, I had to kill you! Sorry, pal!  
    &lt;/p&gt;
  &lt;/li&gt;
&lt;/script&gt; 
</code></pre>
</div>

<p>By looking at the <strong>type</strong> of thes object, the <code class="highlighter-rouge">selectTemplate</code> function picks the right template from the HTML.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>function selectTemplate (_activity) {
  
  var myTemplate;
  
  switch (_activity.type) {
    
    case 'IssuesEvent':
    myTemplate = _.template($('#issueEvent').html());
    break;
    
    case 'WatchEvent':
    myTemplate = _.template($('#watchEvent').html());
    break;
    
    case 'PushEvent':
    myTemplate = _.template($('#pushEvent').html());
    break;
    
    default:
    myTemplate = _.template($('#default').html());
    break;
    
  }
  
  return myTemplate(_activity);
}
</code></pre>
</div>

<h3 id="displaying-data-in-html">Displaying Data in HTML</h3>

<p>Finally the HTML of our <strong>activityObj</strong> returns to the <code class="highlighter-rouge">displayActivities</code> function and is added to the <strong>activites</strong> array, which afterwards is joined and added to the containing DOM element.</p>

<h2 id="thats-it">That’s it</h2>

<p>I am a little proud of the outcome and I like the tool set. I just have scratched the capabilities of <a href="http://underscorejs.org">underscore.js</a>, but even just for templating it is awesome. And the features of <a href="http://momentjs.com">moment.js</a> allow more than I used in this example.</p>

<p>I think there will be more to come!</p>


  </div>
  <div class="devider">&#182;</div>
</article>

      </div>
    </div>

    <footer class="footer" role="contentinfo">
<div class="footer-container">
  <div class="footer-logo">
    <span class="icon icon--pdxiii">
        <svg viewBox="0 0 1024 1024">
  <path d="M512,988 C774.8876,988 988,774.8876 988,512 C988,249.1124 774.8876,36 512,36 C249.1124,36 36,249.1124 36,512 C36,774.8876 249.1124,988 512,988 L512,988 Z M512,945 C272.8607,945 79,751.1393 79,512 C79,272.8607 272.8607,79 512,79 C751.1393,79 945,272.8607 945,512 C945,751.1393 751.1393,945 512,945 L512,945 Z M512,935 C278.3835,935 89,745.6165 89,512 C89,278.3835 278.3835,89 512,89 C745.6165,89 935,278.3835 935,512 C935,745.6165 745.6165,935 512,935 L512,935 L512,935 Z M505.9289,513 L252.9664,765.9625 C251.0138,767.9151 251.0138,771.081 252.9664,773.0336 C254.919,774.9862 258.0849,774.9862 260.0375,773.0336 L513,520.0711 L765.9625,773.0336 C767.9151,774.9862 771.081,774.9862 773.0336,773.0336 C774.9862,771.081 774.9862,767.9151 773.0336,765.9625 L520.0711,513 L773.0326,260.0385 C774.9852,258.0858 774.9852,254.92 773.0326,252.9674 C771.08,251.0148 767.9142,251.0148 765.9615,252.9674 L513,505.9289 L260.0385,252.9674 C258.0858,251.0148 254.92,251.0148 252.9674,252.9674 C251.0148,254.92 251.0148,258.0858 252.9674,260.0385 L505.9289,513 L505.9289,513 Z M278.656,594 L295.68,594 L255.584,510.672 L291.424,435.408 L275.296,435.408 L247.072,498.128 L218.624,435.408 L202.048,435.408 L238.112,510.448 L198.016,594 L214.592,594 L246.624,523.664 L278.656,594 L278.656,594 Z M812.08,594 L827.76,594 L827.76,435.408 L812.08,435.408 L812.08,594 L812.08,594 Z M563.76,772.928 L563.76,772.928 C563.76,759.9359 562.416,748.4747 559.728,738.544 C557.04,728.6133 553.1947,720.288 548.192,713.568 C543.1893,706.848 537.1414,701.808 530.048,698.448 C522.9546,695.088 515.0774,693.408 506.416,693.408 L472.144,693.408 L472.144,852 L506.192,852 C514.8534,852 522.7306,850.32 529.824,846.96 C536.9174,843.6 543.0026,838.5974 548.08,831.952 C553.1574,825.3066 557.04,817.056 559.728,807.2 C562.416,797.344 563.76,785.9201 563.76,772.928 L563.76,772.928 Z M768.112,594 L783.792,594 L783.792,435.408 L768.112,435.408 L768.112,594 L768.112,594 Z M724.144,594 L739.824,594 L739.824,435.408 L724.144,435.408 L724.144,594 L724.144,594 Z M561.872,208.416 L561.872,208.416 C561.872,200.2026 560.64,193.3334 558.176,187.808 C555.712,182.2826 552.5387,177.84 548.656,174.48 C544.7733,171.12 540.4427,168.768 535.664,167.424 C530.8853,166.08 526.1814,165.408 521.552,165.408 L484.144,165.408 L484.144,324 L499.6,324 L499.6,253.216 L522.896,253.216 C527.9734,253.216 532.864,252.2453 537.568,250.304 C542.272,248.3627 546.416,245.5254 550,241.792 C553.584,238.0586 556.4587,233.392 558.624,227.792 C560.7893,222.192 561.872,215.7334 561.872,208.416 L561.872,208.416 Z M548.304,772.928 C548.304,761.7279 547.2213,751.984 545.056,743.696 C542.8907,735.408 539.904,728.576 536.096,723.2 C532.288,717.824 527.808,713.792 522.656,711.104 C517.504,708.416 511.9414,707.072 505.968,707.072 L487.6,707.072 L487.6,838.336 L505.968,838.336 C511.9414,838.336 517.504,836.992 522.656,834.304 C527.808,831.616 532.288,827.584 536.096,822.208 C539.904,816.832 542.8907,810.0374 545.056,801.824 C547.2213,793.6106 548.304,783.9787 548.304,772.928 L548.304,772.928 L548.304,772.928 Z M546.416,208.64 C546.416,203.4133 545.744,198.896 544.4,195.088 C543.056,191.28 541.1893,188.1813 538.8,185.792 C536.4107,183.4027 533.6853,181.648 530.624,180.528 C527.5627,179.408 524.24,178.848 520.656,178.848 L499.6,178.848 L499.6,240 L520.88,240 C527.8987,240 533.9093,237.424 538.912,232.272 C543.9147,227.12 546.416,219.2427 546.416,208.64 L546.416,208.64 L546.416,208.64 Z" </path>
</svg>
    </span>
  </div>
  <h1 class="footer-title">Made in Berlin</h1>
  <div class="footer-links">
    <ul>
      <li><h3>Contact</h3></li>
      <li><a href="http://twitter.com/PDXIII">Twitter</a></li>
      <li><a href="http://petersekan.de/">Website</a></li>
      <li><a href="mailto:sekan.pete@gmail.com">Mail</a></li>
    </ul>
    <ul>
      <li><h3>Content</h3></li>
      <li><a href="/">Home</a></li>
      <li><a href="/about/">About</a></li>
      <li><a href="/readme/">Imprint</a></li>
    </ul>
  </div>
  
  <hr>
  
  <p><p>All code written by Peter Sekan aka PDXIII is published under <a href="/license/">MIT License</a>. Other libraries, graphics, fonts and images may underly some sort of copyright. So please check it out before you use them.</p>
</p>
</div>
</footer>

    <!-- 3rd party libraries -->
<script src="/bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>
<script src="/bower_components/underscore/underscore-min.js" charset="utf-8"></script>
<script src="/bower_components/moment/min/moment.min.js" charset="utf-8"></script>

<!-- own javascript -->
<script src="/js/app.js" charset="utf-8"></script>


  </body>

</html>
